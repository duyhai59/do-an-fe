<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <!-- Card Advance -->
    <div class="row match-height">
      <!-- Congratulations Card -->
      <div class="col-lg-6 col-md-12 col-sm-12">
        <div class="card card-congratulations">
          <div class="card-body text-center">
            <img src="assets/images/elements/decore-left.png" class="congratulations-img-left" alt="card-img-left" />
            <img src="assets/images/elements/decore-right.png" class="congratulations-img-right" alt="card-img-right" />
            <div class="avatar avatar-xl bg-primary shadow">
              <div class="avatar-content">
                <i data-feather="award" class="font-large-1"></i>
              </div>
            </div>
            <div class="text-center">
              <h1 class="mb-1 text-white">Congratulations {{ currentUser?.firstName }},</h1>
              <p class="card-text m-auto w-75">This page can be accessed <strong>only by administrators</strong>.</p>

              <p class="card-text m-auto w-75">
                All users from secure (admin only) api end point.
                <span *ngIf="loading" class="spinner-border spinner-border-sm"></span>
                <ng-container *ngIf="users">
                  <span *ngFor="let user of users">{{ user.firstName }} {{ user.lastName }} ({{ user.role }}), </span>
                </ng-container>
              </p>
            </div>
          </div>
        </div>
      </div>
      <!--/ Congratulations Card -->

      <div class="col-lg-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-header d-flex flex-column align-items-start pb-0">
            <div class="avatar bg-light-primary p-50 m-0">
              <div class="avatar-content">
                <i data-feather="users" class="font-medium-5"></i>
              </div>
            </div>
            <h2 class="font-weight-bolder mt-1">{{ data.subscribers_gained.analyticsData.subscribers }}</h2>
            <p class="mb-0">Subscribers Gained</p>
          </div>

          <!-- Apexchart component-->
          <div id="gainedChartoptions" #gainedChartRef>
            <apx-chart
              [series]="data.subscribers_gained.series"
              [chart]="{
                height: 100,
                width: isMenuToggled === true ? gainedChartRef.offsetWidth : gainedChartoptions.chart.width,
                type: 'area',
                toolbar: {
                  show: false
                },
                sparkline: {
                  enabled: true
                }
              }"
              [stroke]="gainedChartoptions.stroke"
              [fill]="gainedChartoptions.fill"
              [tooltip]="gainedChartoptions.tooltip"
              [colors]="gainedChartoptions.colors"
              [dataLabels]="gainedChartoptions.dataLabels"
            ></apx-chart>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-sm-6 col-12">
        <div class="card">
          <div class="card-header d-flex flex-column align-items-start pb-0">
            <div class="avatar bg-light-warning p-50 m-0">
              <div class="avatar-content">
                <i data-feather="package" class="font-medium-5"></i>
              </div>
            </div>
            <h2 class="font-weight-bolder mt-1">{{ data.ordersRecevied.analyticsData.orders }}</h2>
            <p class="mb-0">Orders Received</p>
          </div>

          <!-- Apexchart component-->
          <div id="orderChartoptions" #orderChartRef>
            <apx-chart
              [series]="data.ordersRecevied.series"
              [chart]="{
                height: 100,
                width: isMenuToggled === true ? orderChartRef.offsetWidth : orderChartoptions.chart.width,
                type: 'area',
                toolbar: {
                  show: false
                },
                sparkline: {
                  enabled: true
                }
              }"
              [stroke]="orderChartoptions.stroke"
              [fill]="orderChartoptions.fill"
              [tooltip]="orderChartoptions.tooltip"
              [colors]="orderChartoptions.colors"
              [dataLabels]="orderChartoptions.dataLabels"
            ></apx-chart>
          </div>
        </div>
      </div>
    </div>

    <div class="row match-height">
      <!-- Average Sessions Card -->
      <div class="col-lg-6 col-12">
        <div class="card">
          <div class="card-body">
            <div class="row pb-50">
              <div class="col-lg-6 col-12 d-flex justify-content-between flex-column order-lg-1 order-2 mt-1 mt-lg-0">
                <div class="mb-1 mb-lg-0">
                  <h2 class="font-weight-bolder mb-25">{{ data.avgSessions.analyticsData.avgSessions }}</h2>
                  <p class="card-text font-weight-bold mb-2">Avg Sessions</p>
                  <div class="font-medium-2">
                    <span class="text-success mr-25">{{ data.avgSessions.analyticsData.vsLastSevenDays }}</span>
                    <span>vs last 7 days</span>
                  </div>
                </div>
                <button type="button" rippleEffect class="btn btn-primary">View Details</button>
              </div>
              <div class="col-lg-6 col-12 d-flex justify-content-between flex-column text-right order-lg-2 order-1">
                <div ngbDropdown class="chart-dropdown">
                  <button
                    rippleEffect
                    class="btn btn-sm border-0 p-50"
                    ngbDropdownToggle
                    type="button"
                    id="dropdownItem5"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    Last 7 Days
                  </button>
                  <div ngbDropdownMenu aria-labelledby="dropdownItem5">
                    <a ngbDropdownItem href="javascript:void(0);">Last 28 Days</a>
                    <a ngbDropdownItem href="javascript:void(0);">Last Month</a>
                    <a ngbDropdownItem href="javascript:void(0);">Last Year</a>
                  </div>
                </div>
                <div id="avgsessionChartoptions" #avgSessionChartRef>
                  <!-- Apexchart component-->
                  <apx-chart
                    [chart]="{
                      type: 'bar',
                      height: 200,
                      width:
                        isMenuToggled === true ? avgSessionChartRef.offsetWidth : avgsessionChartoptions.chart.width,
                      sparkline: { enabled: true },
                      toolbar: { show: false }
                    }"
                    [states]="avgsessionChartoptions.states"
                    [colors]="avgsessionChartoptions.colors"
                    [series]="data.avgSessions.series"
                    [plotOptions]="avgsessionChartoptions.plotOptions"
                    [tooltip]="avgsessionChartoptions.tooltip"
                  ></apx-chart>
                  <!-- / Apexchart component-->
                </div>
              </div>
            </div>
            <hr />
            <div class="row avg-sessions pt-50">
              <div class="col-6 mb-2">
                <p class="mb-50">Goal: {{ data.avgSessions.analyticsData.goal }}</p>

                <ngb-progressbar
                  type="primary"
                  [height]="'6px'"
                  [value]="data.avgSessions.analyticsData.goalProgressbar"
                ></ngb-progressbar>
              </div>
              <div class="col-6 mb-2">
                <p class="mb-50">Users: {{ data.avgSessions.analyticsData.users }}</p>

                <ngb-progressbar
                  type="warning"
                  [height]="'6px'"
                  [value]="data.avgSessions.analyticsData.retentionProgressbar"
                ></ngb-progressbar>
              </div>
              <div class="col-6">
                <p class="mb-50">Retention: {{ data.avgSessions.analyticsData.retention }}</p>

                <ngb-progressbar
                  type="danger"
                  [height]="'6px'"
                  [value]="data.avgSessions.analyticsData.usersProgressbar"
                ></ngb-progressbar>
              </div>
              <div class="col-6">
                <p class="mb-50">Duration: {{ data.avgSessions.analyticsData.duration }}</p>

                <ngb-progressbar
                  type="success"
                  [height]="'6px'"
                  [value]="data.avgSessions.analyticsData.durationProgressbar"
                ></ngb-progressbar>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--/ Average Sessions Card -->

      <!-- Support Tracker Card -->
      <div class="col-lg-6 col-12">
        <div class="card">
          <div class="card-header d-flex justify-content-between pb-0">
            <h4 class="card-title">Support Tracker</h4>
            <div ngbDropdown class="chart-dropdown">
              <button
                rippleEffect
                class="btn btn-sm border-0 p-50"
                ngbDropdownToggle
                type="button"
                id="dropdownItem4"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                Last 7 Days
              </button>
              <div ngbDropdownMenu class="dropdown-menu-right" aria-labelledby="dropdownItem4">
                <a ngbDropdownItem href="javascript:void(0);">Last 28 Days</a>
                <a ngbDropdownItem href="javascript:void(0);">Last Month</a>
                <a ngbDropdownItem href="javascript:void(0);">Last Year</a>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-sm-2 col-12 d-flex flex-column flex-wrap text-center">
                <h1 class="font-large-2 font-weight-bolder mt-2 mb-0">
                  {{ data.supportTracker.analyticsData.tickets }}
                </h1>
                <p class="card-text">Tickets</p>
              </div>
              <div class="col-sm-10 col-12 d-flex justify-content-center" #supportChartRef>
                <div id="supportChartoptions">
                  <!-- Apexchart component-->
                  <apx-chart
                    [series]="data.supportTracker.series"
                    [chart]="{
                      height: 290,
                      width: isMenuToggled === true ? supportChartRef.offsetWidth : supportChartoptions.chart.width,
                      type: 'radialBar',
                      sparkline: {
                        enabled: false
                      }
                    }"
                    [plotOptions]="supportChartoptions.plotOptions"
                    [colors]="supportChartoptions.colors"
                    [fill]="supportChartoptions.fill"
                    [stroke]="supportChartoptions.stroke"
                    [labels]="supportChartoptions.labels"
                  ></apx-chart>
                  <!-- / Apexchart component-->
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-between mt-1">
              <div class="text-center">
                <p class="card-text mb-50">New Tickets</p>
                <span class="font-large-1 font-weight-bold">{{ data.supportTracker.analyticsData.newTickets }}</span>
              </div>
              <div class="text-center">
                <p class="card-text mb-50">Open Tickets</p>
                <span class="font-large-1 font-weight-bold">{{ data.supportTracker.analyticsData.openTickets }}</span>
              </div>
              <div class="text-center">
                <p class="card-text mb-50">Response Time</p>
                <span class="font-large-1 font-weight-bold">{{ data.supportTracker.analyticsData.responseTime }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--/ Support Tracker Card -->
    </div>

    <div class="row match-height">
      <!-- Sales Polygon Chart Card -->
      <div class="col-lg-4 col-md-6 col-12">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-start pb-1">
            <div>
              <h4 class="card-title mb-25">Sales</h4>
              <p class="card-text">Last 6 months</p>
            </div>
            <div ngbDropdown>
              <button
                rippleEffect
                class="btn btn-sm border-0 p-0 hide-arrow"
                ngbDropdownToggle
                type="button"
                id="dropdownItem4"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <i data-feather="more-vertical" class="font-medium-3 cursor-pointer"></i>
              </button>
              <div ngbDropdownMenu class="dropdown-menu-right" aria-labelledby="dropdownItem4">
                <a ngbDropdownItem href="javascript:void(0);">Last 28 Days</a>
                <a ngbDropdownItem href="javascript:void(0);">Last Month</a>
                <a ngbDropdownItem href="javascript:void(0);">Last Year</a>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="d-inline-block mr-1">
              <div class="d-flex align-items-center">
                <i data-feather="circle" class="font-small-3 text-primary mr-50"></i>
                <h6 class="mb-0">Sales</h6>
              </div>
            </div>
            <div class="d-inline-block">
              <div class="d-flex align-items-center">
                <i data-feather="circle" class="font-small-3 text-info mr-50"></i>
                <h6 class="mb-0">Visits</h6>
              </div>
            </div>
            <div id="salesChartoptions" #salesChartRef>
              <!-- Apexchart component-->
              <apx-chart
                [chart]="{
                  height: 330,
                  width: isMenuToggled === true ? salesChartRef.offsetWidth : salesChartoptions.chart.width,
                  type: 'radar',
                  dropShadow: {
                    enabled: true,
                    blur: 8,
                    left: 1,
                    top: 1,
                    opacity: 0.2
                  },
                  toolbar: {
                    show: false
                  }
                }"
                [series]="data.salesLastSixMonths.series"
                [stroke]="salesChartoptions.stroke"
                [colors]="salesChartoptions.colors"
                [plotOptions]="salesChartoptions.plotOptions"
                [fill]="salesChartoptions.fill"
                [markers]="salesChartoptions.markers"
                [legend]="salesChartoptions.legend"
                [labels]="salesChartoptions.labels"
                [dataLabels]="salesChartoptions.dataLabels"
                [dataLabels]="salesChartoptions.dataLabels"
                [yaxis]="salesChartoptions.yaxis"
              ></apx-chart>
              <!-- / Apexchart component-->
            </div>
          </div>
        </div>
      </div>
      <!--/ Sales Polygon Chart Card -->
    </div>
  </div>
</div>
